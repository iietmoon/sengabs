!function(n){"use strict";window.jkitdashboard=window.jkitdashboard||{},window.jkitdashboard={init:function(t){var e=this;e.xhr=null,e.container=void 0===t?n("body"):t,Notiflix.Notify.Init({position:"right-top",zindex:999999,showOnlyTheLastOne:!0,success:{notiflixIconColor:"#fff"}}),e.button_save=e.container.find(".jkit-dashboard-body-wrap .jkit-form-submit>button"),e.form_handler(),e.elements(),e.admin_menu()},admin_menu:function(){this.container.find(".jkit-support-menu").attr("target","_blank")},form_handler:function(){var t=this,e=t.container.find("#jkit-user-data-form, #jkit-settings-form, #jkit-notfound-form");e.find(".jkit-form-content").on("click",(function(t){t.preventDefault();var e=n(this).parents(".jkit-form-tab ");e.hasClass("collapse")?e.removeClass("collapse"):e.addClass("collapse")})),e.on("submit",(function(e){e.preventDefault();var a=n(this).attr("id"),i={},o="",s="",r="",f=/\[([^\]]+)\]/;"jkit-user-data-form"===a?o="save_user_data":"jkit-settings-form"===a?o="save_settings":"jkit-notfound-form"===a&&(o="save_notfound"),n(this).find("input, select").each((function(t){s=f.exec(n(this).attr("name")),r=n(this).val(),i[s[1]]=r})),t.button_save.addClass("saving"),t.button_save.find("i").removeClass("fa-save").addClass("fa-spinner fa-spin"),n.ajax({type:"POST",url:jkit_ajax_url,data:{form_data:i,action:o,nonce:jkit_nonce},dataType:"json",encode:!0}).done((function(n){Notiflix.Notify.Success(n.message),t.button_save.removeClass("saving"),t.button_save.find("i").removeClass("fa-spinner fa-spin").addClass("fa-save")})).fail((function(){Notiflix.Notify.Failure(jkit_dashboard_localize.save_failed),t.button_save.removeClass("saving")}))}))},elements:function(){var t=this,e=t.container.find(".element-checkbox-option .switch"),a=t.container.find(".jkit-button.enable-all"),i=t.container.find(".jkit-button.disable-all"),o=t.container.find("#jkit-elements-enable-form");e.on("click",(function(t){t.preventDefault();var e=n(this).prev("input");e.is(":checked")?e.prop("checked",!1):e.prop("checked",!0)})),a.on("click",(function(n){n.preventDefault(),e.prev("input").prop("checked",!0)})),i.on("click",(function(n){n.preventDefault(),e.prev("input").prop("checked",!1)})),o.on("submit",(function(a){a.preventDefault();var i={};t.button_save.addClass("saving"),t.button_save.find("i").removeClass("fa-save").addClass("fa-spinner fa-spin"),e.each((function(t,e){var a=n(e).prev("input"),o=a.data("element-key");i[o]=a.is(":checked")})),n.ajax({type:"POST",url:jkit_ajax_url,data:{form_data:i,action:"save_elements_enable",nonce:jkit_nonce},dataType:"json",encode:!0}).done((function(n){Notiflix.Notify.Success(n.message),t.button_save.removeClass("saving"),t.button_save.find("i").removeClass("fa-spinner fa-spin").addClass("fa-save")})).fail((function(){Notiflix.Notify.Failure(jkit_dashboard_localize.save_failed),t.button_save.removeClass("saving")}))}))}},n(document).on("ready",(function(){window.jkitdashboard.init()}))}(jQuery);